// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import 'forge-std/Script.sol';
import {ICREATE3Factory} from '../lib/create3-factory/src/ICREATE3Factory.sol';
import {MockERC721} from '../src/tokens/MockERC721.sol';

contract C3Deploy is Script {
    ICREATE3Factory factory =
        ICREATE3Factory(0x7f7f488AA05d5cbf7866Df916705DB67fD0138Fd);

    bytes32 salt = keccak256(abi.encodePacked('LOYALTY1'));

    bytes nftCode =
        hex'6080604052600680546001600160a01b03191673f108412695bde69025fdcc7da7048f4ffa43bc591790553480156200003757600080fd5b5060405180604001604052806004815260200163524c545960e01b815250604051806040016040528060038152602001624c545960e81b81525081600090816200008291906200013f565b5060016200009182826200013f565b5050506200020b565b634e487b7160e01b600052604160045260246000fd5b600181811c90821680620000c557607f821691505b602082108103620000e657634e487b7160e01b600052602260045260246000fd5b50919050565b601f8211156200013a57600081815260208120601f850160051c81016020861015620001155750805b601f850160051c820191505b81811015620001365782815560010162000121565b5050505b505050565b81516001600160401b038111156200015b576200015b6200009a565b62000173816200016c8454620000b0565b84620000ec565b602080601f831160018114620001ab5760008415620001925750858301515b600019600386901b1c1916600185901b17855562000136565b600085815260208120601f198616915b82811015620001dc57888601518255948401946001909101908401620001bb565b5085821015620001fb5787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b611b53806200021b6000396000f3fe608060405234801561001057600080fd5b50600436106100f55760003560e01c806370a0823111610097578063a22cb46511610066578063a22cb46514610215578063b88d4fde14610228578063c87b56dd1461023b578063e985e9c51461024e57600080fd5b806370a08231146101c65780638da5cb5b146101e757806394bf804d146101fa57806395d89b411461020d57600080fd5b8063095ea7b3116100d3578063095ea7b31461017857806323b872dd1461018d57806342842e0e146101a05780636352211e146101b357600080fd5b806301ffc9a7146100fa57806306fdde0314610122578063081812fc14610137575b600080fd5b61010d610108366004611055565b61027c565b60405190151581526020015b60405180910390f35b61012a6102ce565b60405161011991906110a9565b6101606101453660046110dc565b6004602052600090815260409020546001600160a01b031681565b6040516001600160a01b039091168152602001610119565b61018b61018636600461110c565b61035c565b005b61018b61019b366004611136565b610443565b61018b6101ae366004611136565b61060a565b6101606101c13660046110dc565b610702565b6101d96101d4366004611172565b610759565b604051908152602001610119565b600654610160906001600160a01b031681565b61018b61020836600461118d565b6107bc565b61012a6107ca565b61018b6102233660046111b9565b6107d7565b61018b6102363660046111f5565b610843565b61012a6102493660046110dc565b61092b565b61010d61025c366004611290565b600560209081526000928352604080842090915290825290205460ff1681565b60006301ffc9a760e01b6001600160e01b0319831614806102ad57506380ac58cd60e01b6001600160e01b03198316145b806102c85750635b5e139f60e01b6001600160e01b03198316145b92915050565b600080546102db906112ba565b80601f0160208091040260200160405190810160405280929190818152602001828054610307906112ba565b80156103545780601f1061032957610100808354040283529160200191610354565b820191906000526020600020905b81548152906001019060200180831161033757829003601f168201915b505050505081565b6000818152600260205260409020546001600160a01b0316338114806103a557506001600160a01b038116600090815260056020908152604080832033845290915290205460ff165b6103e75760405162461bcd60e51b815260206004820152600e60248201526d1393d517d055551213d49256915160921b60448201526064015b60405180910390fd5b60008281526004602052604080822080546001600160a01b0319166001600160a01b0387811691821790925591518593918516917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92591a4505050565b6000818152600260205260409020546001600160a01b038481169116146104995760405162461bcd60e51b815260206004820152600a60248201526957524f4e475f46524f4d60b01b60448201526064016103de565b6001600160a01b0382166104e35760405162461bcd60e51b81526020600482015260116024820152701253959053125117d49150d25412515395607a1b60448201526064016103de565b336001600160a01b038416148061051d57506001600160a01b038316600090815260056020908152604080832033845290915290205460ff165b8061053e57506000818152600460205260409020546001600160a01b031633145b61057b5760405162461bcd60e51b815260206004820152600e60248201526d1393d517d055551213d49256915160921b60448201526064016103de565b6001600160a01b0380841660008181526003602090815260408083208054600019019055938616808352848320805460010190558583526002825284832080546001600160a01b03199081168317909155600490925284832080549092169091559251849392917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef91a4505050565b610615838383610443565b6001600160a01b0382163b15806106be5750604051630a85bd0160e11b8082523360048301526001600160a01b03858116602484015260448301849052608060648401526000608484015290919084169063150b7a029060a4016020604051808303816000875af115801561068e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106b291906112f4565b6001600160e01b031916145b6106fd5760405162461bcd60e51b815260206004820152601060248201526f155394d0519157d49150d2541251539560821b60448201526064016103de565b505050565b6000818152600260205260409020546001600160a01b0316806107545760405162461bcd60e51b815260206004820152600a6024820152691393d517d3525395115160b21b60448201526064016103de565b919050565b60006001600160a01b0382166107a05760405162461bcd60e51b815260206004820152600c60248201526b5a45524f5f4144445245535360a01b60448201526064016103de565b506001600160a01b031660009081526003602052604090205490565b6107c68183610993565b5050565b600180546102db906112ba565b3360008181526005602090815260408083206001600160a01b03871680855290835292819020805460ff191686151590811790915590519081529192917f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a35050565b61084e858585610443565b6001600160a01b0384163b15806108e55750604051630a85bd0160e11b808252906001600160a01b0386169063150b7a02906108969033908a90899089908990600401611311565b6020604051808303816000875af11580156108b5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108d991906112f4565b6001600160e01b031916145b6109245760405162461bcd60e51b815260206004820152601060248201526f155394d0519157d49150d2541251539560821b60448201526064016103de565b5050505050565b60606102c8828360405160200161094491815260200190565b60405160208183030381529060405280519060200120604051806040016040528060018152602001602960f91b815250604051806040016040528060018152602001601360fa1b815250610a9e565b6001600160a01b0382166109dd5760405162461bcd60e51b81526020600482015260116024820152701253959053125117d49150d25412515395607a1b60448201526064016103de565b6000818152600260205260409020546001600160a01b031615610a335760405162461bcd60e51b815260206004820152600e60248201526d1053149150511657d3525395115160921b60448201526064016103de565b6001600160a01b038216600081815260036020908152604080832080546001019055848352600290915280822080546001600160a01b0319168417905551839291907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908290a45050565b6060610af9610aac86610b22565b610ab7868686610c2b565b604051602001610ac8929190611365565b60408051601f1981840301815290829052610ae5916020016113d6565b604051602081830303815290604052610ca1565b604051602001610b0991906113f2565b6040516020818303038152906040529050949350505050565b606081600003610b495750506040805180820190915260018152600360fc1b602082015290565b8160005b8115610b735780610b5d8161144d565b9150610b6c9050600a8361147c565b9150610b4d565b60008167ffffffffffffffff811115610b8e57610b8e611490565b6040519080825280601f01601f191660200182016040528015610bb8576020820181803683370190505b5090505b8415610c2357610bcd6001836114a6565b9150610bda600a866114bd565b610be59060306114d1565b60f81b818381518110610bfa57610bfa6114e9565b60200101906001600160f81b031916908160001a905350610c1c600a8661147c565b9450610bbc565b949350505050565b60606000806000610c3b87610e08565b925092509250610c76610c4c610ea9565b848484610c57610ec9565b610c618c8c610ee9565b604051602001610ac8969594939291906114ff565b604051602001610c86919061157e565b60405160208183030381529060405293505050509392505050565b60608151600003610cc057505060408051602081019091526000815290565b6000604051806060016040528060408152602001611a436040913990506000600384516002610cef91906114d1565b610cf9919061147c565b610d049060046115c3565b90506000610d138260206114d1565b67ffffffffffffffff811115610d2b57610d2b611490565b6040519080825280601f01601f191660200182016040528015610d55576020820181803683370190505b509050818152600183018586518101602084015b81831015610dc35760039283018051603f601282901c811687015160f890811b8552600c83901c8216880151811b6001860152600683901c8216880151811b60028601529116860151901b93820193909352600401610d69565b600389510660018114610ddd5760028114610dee57610dfa565b613d3d60f01b600119830152610dfa565b603d60f81b6000198301525b509398975050505050505050565b60608060606000806000610e1b87610f61565b9250925092508283838386604051602001610e3a959493929190611669565b60405160208183030381529060405295508182828585604051602001610e64959493929190611734565b60405160208183030381529060405294508081848484604051602001610e8e95949392919061177a565b60405160208183030381529060405293505050509193909250565b60606040518060a00160405280607781526020016119cc60779139905090565b60606040518060c00160405280609b8152602001611a83609b9139905090565b60608251600003610f1157604051806040016040528060018152602001601760f91b81525092505b8151600003610f3757604051806040016040528060018152602001601760f91b81525091505b8282604051602001610f4a929190611841565b604051602081830303815290604052905092915050565b60608080610f728460005b1a610b22565b610f7d856001610f6c565b610f88866002610f6c565b604051602001610f9a93929190611953565b60408051601f198184030181529190529250610fb784600a610f6c565b610fc285600b610f6c565b610fcd86600c610f6c565b604051602001610fdf93929190611953565b60408051601f198184030181529190529150610ffc846014610f6c565b611007856015610f6c565b611012866016610f6c565b60405160200161102493929190611953565b60405160208183030381529060405290509193909250565b6001600160e01b03198116811461105257600080fd5b50565b60006020828403121561106757600080fd5b81356110728161103c565b9392505050565b60005b8381101561109457818101518382015260200161107c565b838111156110a3576000848401525b50505050565b60208152600082518060208401526110c8816040850160208701611079565b601f01601f19169190910160400192915050565b6000602082840312156110ee57600080fd5b5035919050565b80356001600160a01b038116811461075457600080fd5b6000806040838503121561111f57600080fd5b611128836110f5565b946020939093013593505050565b60008060006060848603121561114b57600080fd5b611154846110f5565b9250611162602085016110f5565b9150604084013590509250925092565b60006020828403121561118457600080fd5b611072826110f5565b600080604083850312156111a057600080fd5b823591506111b0602084016110f5565b90509250929050565b600080604083850312156111cc57600080fd5b6111d5836110f5565b9150602083013580151581146111ea57600080fd5b809150509250929050565b60008060008060006080868803121561120d57600080fd5b611216866110f5565b9450611224602087016110f5565b935060408601359250606086013567ffffffffffffffff8082111561124857600080fd5b818801915088601f83011261125c57600080fd5b81358181111561126b57600080fd5b89602082850101111561127d57600080fd5b9699959850939650602001949392505050565b600080604083850312156112a357600080fd5b6112ac836110f5565b91506111b0602084016110f5565b600181811c908216806112ce57607f821691505b6020821081036112ee57634e487b7160e01b600052602260045260246000fd5b50919050565b60006020828403121561130657600080fd5b81516110728161103c565b6001600160a01b038681168252851660208201526040810184905260806060820181905281018290526000828460a0840137600060a0848401015260a0601f19601f85011683010190509695505050505050565b6d7b226e616d65223a224f5242202360901b8152825160009061138f81600e850160208801611079565b6b1116101134b6b0b3b2911d1160a11b600e9184019182015283516113bb81601a840160208801611079565b61227d60f01b601a9290910191820152601c01949350505050565b600082516113e8818460208701611079565b9190910192915050565b7f646174613a6170706c69636174696f6e2f6a736f6e3b6261736536342c00000081526000825161142a81601d850160208701611079565b91909101601d0192915050565b634e487b7160e01b600052601160045260246000fd5b60006001820161145f5761145f611437565b5060010190565b634e487b7160e01b600052601260045260246000fd5b60008261148b5761148b611466565b500490565b634e487b7160e01b600052604160045260246000fd5b6000828210156114b8576114b8611437565b500390565b6000826114cc576114cc611466565b500690565b600082198211156114e4576114e4611437565b500190565b634e487b7160e01b600052603260045260246000fd5b6000875160206115128285838d01611079565b8851918401916115258184848d01611079565b88519201916115378184848c01611079565b87519201916115498184848b01611079565b865192019161155b8184848a01611079565b855192019161156d8184848901611079565b919091019998505050505050505050565b7f646174613a696d6167652f7376672b786d6c3b6261736536342c0000000000008152600082516115b681601a850160208701611079565b91909101601a0192915050565b60008160001904831182151516156115dd576115dd611437565b500290565b7f273e3c616e696d617465206174747269627574654e616d653d2773746f702d6381526d6f6c6f72272076616c7565733d2760901b6020820152602e0190565b7f27206475723d2732732720726570656174436f756e743d27696e646566696e698152743a32939f1e17b0b734b6b0ba329f1e17b9ba37b81f60591b602082015260350190565b7f3c73746f70206f66667365743d273025272073746f702d636f6c6f723d2700008152600086516116a181601e850160208b01611079565b6116af601e828501016115e2565b905086516116c1818360208b01611079565b603b60f81b910181815286519091906116e1816001850160208b01611079565b6001920191820181905285516116fe816002850160208a01611079565b60029201918201528351611719816003840160208801611079565b611727600382840101611622565b9998505050505050505050565b7f3c73746f70206f66667365743d27353025272073746f702d636f6c6f723d270081526000865161176c81601f850160208b01611079565b6116af601f828501016115e2565b7f3c73746f70206f66667365743d2731303025272073746f702d636f6c6f723d2781526000602087516117b281838601848c01611079565b6117bf82828601016115e2565b905087516117d08183858c01611079565b603b60f81b910181815287519091906117ef8160018501868c01611079565b60019201918201819052865161180b8160028501868b01611079565b600292019182015284516118258160038401858901611079565b611833600382840101611622565b9a9950505050505050505050565b7f3c7465787420783d2731372e35252720793d273630252720666f6e742d73697a81527f653d273430272066696c6c3d27626c61636b2720746578742d616e63686f723d60208201526813b6b4b2323632939f60b91b6040820152600083516118b1816049850160208801611079565b7f3c2f746578743e3c7465787420783d2738322e35252720793d273630252720666049918401918201527f6f6e742d73697a653d273430272066696c6c3d27626c61636b2720746578742d60698201526f30b731b437b91e93b6b4b2323632939f60811b6089820152835161192d816099840160208801611079565b6c1e17ba32bc3a1f1e17b9bb339f60991b6099929091019182015260a601949350505050565b630e4cec4560e31b815260008451611972816004850160208901611079565b8083019050600b60fa1b8060048301528551611995816005850160208a01611079565b600592019182015283516119b0816006840160208801611079565b602960f81b600692909101918201526007019594505050505056fe3c7376672077696474683d2732303027206865696768743d273230302720786d6c6e733d27687474703a2f2f7777772e77332e6f72672f323030302f737667273e3c646566733e3c72616469616c4772616469656e742069643d276772616469656e74272063783d27353025272063793d27333525273e4142434445464748494a4b4c4d4e4f505152535455565758595a6162636465666768696a6b6c6d6e6f707172737475767778797a303132333435363738392b2f3c2f72616469616c4772616469656e743e3c2f646566733e3c636972636c652063783d27353025272063793d273530252720723d27313030272066696c6c3d2275726c2827236772616469656e742729222f3e3c7465787420783d273332252720793d273730252720666f6e742d73697a653d273135302720726f746174653d27393025272066696c6c3d27626c61636b273e293c2f746578743ea2646970667358221220eddb57069815ab725551b4ab5c3c1ac8752e0d0b96dff940325bf608b71a3f9c64736f6c634300080f0033';

    function run() public {
        uint256 deployerPrivateKey = 0xbe4226c5bb313a56473ebcbe0a6a3b9b0ca1933089aeaa67dca88d9c04e480e0;

        vm.startBroadcast(deployerPrivateKey);

        factory.deploy(salt, nftCode);

        vm.stopBroadcast();
    }
}
